[[source]]
url = "https://pypi.python.org/simple"
verify_ssl = true
name = "pypi"

[requires]
python_version = "3.9.17"

[packages]
boto3 = "*"
jsonref = "*"
pyyaml = "*"
simplejson = "*"

[dev-packages]
mypy = "*"
lxml = "*"
pylint = "*"
pytest = "*"
pytest-cov = "*"
pytest-html = "*"

[scripts]
lint = "pylint --fail-under 10 daplug_ddb"
test = "pytest tests/unit"
test_ci = "pytest"
integrations = "bash -c 'if command -v docker >/dev/null 2>&1; then docker rm -f daplug-ddb-test >/dev/null 2>&1 || true; docker pull amazon/dynamodb-local >/dev/null; docker run -d --name daplug-ddb-test -p 4000:8000 amazon/dynamodb-local -jar DynamoDBLocal.jar -inMemory -port 8000 >/dev/null; cleanup() { docker rm -f daplug-ddb-test >/dev/null 2>&1 || true; }; trap cleanup EXIT INT TERM; fi; AWS_ACCESS_KEY_ID=test AWS_SECRET_ACCESS_KEY=test AWS_DEFAULT_REGION=us-east-2 pytest tests/integration'"
coverage = "coverage run --source daplug_ddb -m pytest tests --cov=daplug_ddb --junitxml ./coverage/reports/junit.xml --cov-report xml:./coverage/reports/cov.xml --html=./coverage/reports/index.html --self-contained-html --cov-report html:./coverage/pretty -p no:warnings -o log_cli=true"
mypy-report = "mypy --html-report ./coverage/typing daplug_ddb"
mypy = "mypy daplug_ddb"
